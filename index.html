<!DOCTYPE html>
<html>
    <head>
        <style>
            * {
                padding: 0;
                margin: 0;
            }
            canvas {
                background: #eee;
                display: block;
                margin: 0 auto;
            }
        </style>
    </head>
    <body>
        <canvas id="myCanvas" width="256" height="240"></canvas>
        <script type="text/javascript">
            const canvas = document.getElementById("myCanvas");
            const ctx = canvas.getContext("2d");
            const fps = 60;

            const worldTiles = new Image();
            worldTiles.src = "imgs/tiles-overworld.png";

            // prettier-ignore
            const map7_7 = [
                // HUD Display at top of screen
                [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
                [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
                [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
                [ 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22],
                // Actual Map
                [ 61, 61, 61, 61, 61, 61, 61,  2,  2, 61, 61, 61, 61, 61, 61, 61],
                [ 61, 61, 61, 61, 28, 61, 62,  2,  2, 61, 61, 61, 61, 61, 61, 61],
                [ 61, 61, 61, 62,  2,  2,  2,  2,  2, 61, 61, 61, 61, 61, 61, 61],
                [ 61, 61, 62,  2,  2,  2,  2,  2,  2, 61, 61, 61, 61, 61, 61, 61],
                [ 61, 62,  2,  2,  2,  2,  2,  2,  2, 60, 61, 61, 61, 61, 61, 61],
                [  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2],
                [ 43, 44,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 43, 43],
                [ 61, 61,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 61, 61],
                [ 61, 61,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 61, 61],
                [ 61, 61, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 61, 61],
                [ 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61]
            ];

            document.body.style.zoom = "240%";

            function drawMap(level) {
                for (let i = 0; i < level.length; i++) {
                    for (let j = 0; j < level[i].length; j++) {
                        // prettier-ignore
                        ctx.drawImage(worldTiles, ((level[i][j] % 18) * 17) + 1,
			                         (Math.floor(level[i][j] / 18) * 17) + 1, 
			                          16, 16, j * 16, i * 16, 16, 16);
                    }
                }
            }

            function draw() {
                setTimeout(function () {
                    requestAnimationFrame(draw);
                    ctx.fillStyle = "rgb(20,20,20)";
                    ctx.fillRect(0, 0, 256, 240);
                    drawMap(map7_7);
                }, 1000 / fps);
            }

            draw();
        </script>
    </body>
</html>
